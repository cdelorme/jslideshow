(function(e){var t;var n=function(e,t){this.setContext(e);this.setConfig(t)};n.prototype.delay=3e3;n.prototype.transition=300;n.prototype.notify={styles:{position:"absolute",width:"200px",textAlign:"center",left:"50%",top:"5px",padding:"4px",background:"#fff",marginLeft:"-100px",borderRadius:"8px",zIndex:"10","-webkit-transition":"opacity 0.5s linear"}};n.prototype.setContext=function(e){if(this.context&&this.image){this.context.removeChild(this.image)}if(e){this.context=e;this.context.appendChild(this.getImage())}};n.prototype.getImage=function(){if(!this.image){this.image=new Image;this.setImageTransition()}return this.image};n.prototype.setImageTransition=function(){this.image.style["-webkit-transition"]="opacity "+this.transition/1e3+"s linear"};n.prototype.setConfig=function(e){for(key in e){var t="set"+key.charAt(0).toUpperCase()+key.slice(1);if(this[t]){this[t](e[key])}}};n.prototype.setTransition=function(e){this.transition=e;this.setImageTransition()};n.prototype.setDelay=function(e){if(e&&e>2*this.transition){this.delay=e}};n.prototype.getDelay=function(){var e=this.getCurrentSlide();return e&&e.delay?e.delay:this.delay};n.prototype.setControls=function(n){this.controls=n;if(t){if(this.controls){if(t!==this){e.removeEventListener(t,this.keyboard);e.removeEventListener(t,this.mouse)}e.addEventListener("keyup",this.keyboard.bind(this));e.addEventListener("click",this.mouse.bind(this));t=this}else if(t===this){e.removeEventListener(t,this.keyboard);e.removeEventListener(t,this.mouse)}}else if(this.controls){e.addEventListener("keyup",this.keyboard.bind(this));e.addEventListener("click",this.mouse.bind(this));t=this}};n.prototype.setNotify=function(e){if(!e.styles){e.styles=this.notify.styles}this.notify=e;this.display=document.createElement("div");this.display.appendChild(document.createTextNode(""));for(style in this.notify.styles){this.display.style[style]=this.notify.styles[style]}this.display.style.opacity="0";if(this.image.parentNode){this.image.parentNode.insertBefore(this.display,this.image.nextSibling)}if(this.notify.info){this.image.addEventListener("mouseover",this.info.bind(this));this.image.addEventListener("mouseout",this.fadeDisplay.bind(this))}else{this.image.removeEventListener("mouseover",this.info);this.image.removeEventListener("mouseout",this.fadeDisplay)}if(this.notify.actions){this.setControls(true)}};n.prototype.fadeDisplay=function(){this.display.style.opacity="0"};n.prototype.action=function(e){this.display.firstChild.data="Action: "+e;this.display.style.opacity="1";setTimeout(this.fadeDisplay.bind(this),1e3)};n.prototype.info=function(){this.display.firstChild.data="Image: "+this.getCurrentSlide().src;this.display.style.opacity="1"};n.prototype.keyboard=function(e){if(e.keyCode){if(e.keyCode==32){this.toggle();if(this.running){this.action("Resumed")}else{this.action("Paused")}}else if(e.keyCode==37){this.backward();this.action("Previous")}else if(e.keyCode==39){this.forward();this.action("Next")}}};n.prototype.mouse=function(){this.forward();this.action("Next")};n.prototype.setImages=function(e){delete this.slides;this.slides=[];delete this.images;this.images={};for(index in e){var t=e[index];if(typeof t==="object"){if(t.image){var n={src:t.image};if(t.delay){n.delay=t.delay}this.slides.push(n);if(!this.images[t.image]){this.images[t.image]={}}}else if(t.start&&t.end&&t.type){for(var r=t.start;r<=t.end;r++){var i=r;if(t.prefix){i=t.prefix+i}i=i+t.type;var n={src:i};if(t.delay){n.delay=t.delay}this.slides.push(n);if(!this.images[i]){this.images[i]={}}}}}else if(typeof t==="string"){var n={src:t};this.slides.push(n);if(!this.images[t]){this.images[t]={}}}}this.loading=this.getImageCount()-1;this.preload()};n.prototype.getImageKeys=function(){return Object.keys(this.images)};n.prototype.getImageCount=function(){return this.getImageKeys().length};n.prototype.getCurrentImage=function(){var e=this.slides[this.index];return this.images[e.src]};n.prototype.getSlidesCount=function(){return this.slides.length};n.prototype.getCurrentSlide=function(){return this.slides[this.index]};n.prototype.preload=function(){var e=this;for(source in this.images){var t=new Image;t.alt=source;t.addEventListener("load",function(){e.images[this.alt].height=this.height;e.images[this.alt].width=this.width;e.images[this.alt].src=this.src;if(e.loading){e.loading--}else{delete e.loading;if(e.waiting){delete e.waiting;e.start()}}if(arguments&&arguments.callee){this.removeEventListener(this,arguments.callee)}});t.src=source}};n.prototype.start=function(){if(this.loading){this.waiting=true}else if(!this.running&&this.images){this.running=true;if(typeof this.index!=="undefined"){this.interval=setTimeout(function(){if(this.running){this.clear();this.forward()}}.bind(this),this.getDelay())}else{this.forward()}}};n.prototype.pause=function(){if(this.running){delete this.running;this.clear()}};n.prototype.clear=function(){if(this.interval){clearTimeout(this.interval);delete this.interval}};n.prototype.toggle=function(){if(this.running){this.pause()}else{this.start()}};n.prototype.stop=function(){this.pause();delete this.index};n.prototype.forward=function(){this.clear();if(typeof this.index==="undefined"||this.index==this.getSlidesCount()-1){this.index=-1}this.index++;this.render();this.interval=setTimeout(function(){if(this.running){this.clear();this.forward()}}.bind(this),this.getDelay())};n.prototype.backward=function(){this.clear();if(!this.index||this.index<0){this.index=this.getSlidesCount()}this.index--;this.interval=setTimeout(function(){if(this.running){this.forward()}}.bind(this),this.getDelay());this.render()};n.prototype.render=function(){slide=this.getCurrentSlide();if(this.transition){this.image.style.opacity="0";setTimeout(function(){this.image.src=slide.src;this.resizeImage();if(this.display){this.display.firstChild.data="Image: "+slide.src}this.image.style.opacity="1"}.bind(this),this.transition)}else{this.image.src=slide.src;this.resizeImage()}};n.prototype.resizeImage=function(){var e=this.getBoundingBox();image=this.getCurrentImage();var t=image.width/image.height;var n=e.width/e.height;if(t<n){this.image.style.height="100%";this.image.style.width="auto"}else{this.image.style.width="100%";this.image.style.height="auto"}};n.prototype.getBoundingBox=function(){return{width:e.innerWidth,height:e.innerHeight}};e.ss=function(e,t){return new n(e,t)}})(window)